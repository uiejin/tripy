<!DOCTYPE html>
<html>

<head>
  <title><%= title %></title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, shrink-to-fit=no user-scalable=0">

  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/magnific-popup.css">
  <link rel="stylesheet" href="/css/jquery-ui.css">
  <link rel="stylesheet" href="/css/owl.carousel.min.css">
  <link rel="stylesheet" href="/css/owl.theme.default.min.css">
  <link rel="stylesheet" href="/css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="/css/timedropper.css">
  <link rel="stylesheet" href="/css/animate.css">

  <link rel="stylesheet" href="/css/aos.css">

  <link rel="stylesheet" href="/css/flaticon.css">
  <link rel="stylesheet" href="/css/icomoon.css">

  <link rel="stylesheet" href="//cdn.rawgit.com/Eonasdan/bootstrap-datetimepicker/e8bddc60e73c1ec2475f827be36e1957af72e2ea/build/css/bootstrap-datetimepicker.css">

  <link rel="stylesheet" href="/css/views/style.css">
  <link rel="stylesheet" href="/css/views/main.css">
  <link rel="stylesheet" href="/css/views/noncover.css">
  <link rel="stylesheet" href="/css/views/writepost.css">
  <link rel="stylesheet" href="/css/views/calendar.css">
  <link rel="stylesheet" href="/css/views/profile.css">
</head>

<body>

  <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-settings js-menu-toggle"></span>
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->

    
    <!--상단바-->
    <div class="site-navbar-wrap js-site-navbar bg-white">

      <div class="container">
        <div class="site-navbar bg-light">
          <div class="py-1">
            <div class="row align-items-center" id="site-navbar-line">
              <div class="col-2">
                <div class="d-inline-block  ml-md-0 mr-auto py-3"><a href="#"
                  class="site-menu-toggle js-menu-toggle"><span class="icon-arrow_back h3" id="nav-back"></span></a></div>
              </div>
              <div class="col-10">
                <nav class="site-navigation text-right" role="navigation">
                  <div class="container">
                    <!-- d-lg-none -->
                    
                    <!-- d-lg-block -->
                  </div>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="site-section bg-light">
    <div class="container" id="writeForm">
      <div class="row" id="writeRow">
        <div id="write-form" class="col-lg-12">
          <div class="form-group">
            <!--자동수락 선택 버튼-->
            <a id="attendCetion" class="col-12"><%=selectgenderText%></a>
            <div class="col-12">
            <div class="btn-group btn-group-toggle" data-toggle="buttons" id="attend-div">
              <label class="btn btn-danger" id="maleBtn">
                <input type="radio" name="genderSelect" value="male"><%=maleText%>
              </label>
              <label class="btn btn-danger"  id="femaleBtn">
                <input type="radio" name="genderSelect"value="female"><%=femaleText%>
              </label>
            </div>
            </div>
            <!--입력 폼-->
           
          </div>
          <div class="form-group col-12">
            <a id="birthdayCetion"><%=birthdayText%></a>
            <div class = "row">
            <div class="col-6 birthdayYearDiv"><input type="number" min="1920" max="2003" class="birthdayinput writeInput" id="yearText"></div>
            <div class="col-3 birthdayMonthDiv"><input type="number" min="1" max="12" class="birthdayinput writeInput" id="monthText"></div>
            <div class="col-3 birthdayDayDiv"><input type="number" min="1" max="31" class="birthdayinput writeInput" id="dayText"></div>
            </div>
          </div>

        </div>
          <div class="col-12" id="button-div">
            <a id="update-button" class="col-12 btn btn-primary px-4 py-2"  ><%=saveText%></a>
          </div>
      </div>
    </div>

    <div id="s_id" data-prodnumber="${sessionScope.id}" />
    <div id="s_auth" data-prodnumber="${sessionScope.authority}" />

  </div>



</body>

<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/lib/jquery-migrate-3.0.1.min.js"></script>
<script src="/js/lib/jquery-ui.js"></script>
<script src="/js/lib/popper.min.js"></script>
<script src="/js/lib/owl.carousel.min.js"></script>
<script src="/js/lib/jquery.stellar.min.js"></script>
<script src="/js/lib/jquery.magnific-popup.min.js"></script>
<script src="/js/lib/bootstrap-datepicker.js"></script>
<script src="/js/lib/timedropper.js"></script>
<script src="/js/lib/aos.js"></script>

<script src="/js/lib/mediaelement-and-player.min.js"></script>

<script src="/js/views/main.js"></script>


<script type="text/javascript">
  $(document).ready(function () {

    var loginStatus  = "<%=loginStatus %>";
    var userId = "<%=userId%>";


    $("#update-button").click(function(){
      
      var autoparticipation = $('input[name=genderSelect]:checked').val();

      var yearText = $("#yearText").val();
      var monthText = $("#monthText").val();
      var dayText = $("#dayText").val();

      var minYear = 1930;
      var maxYear = 2006


      var birthdayDate = yearText + "-" + monthText + "-" + dayText;


      if(parseInt(yearText) < minYear || parseInt(yearText) > maxYear){
        alert("<%=yearTextErr%>");
      
      }else{

        var allData = {
          "birthdayDate" : birthdayDate,
          "gender" : autoparticipation,
          "userId" : userId
        }

        $.ajax({
        url: "/users/profile/updateotherinformation",
        data: allData,
        async: false,
        type: "get",
        success: function (data) {
          if(data['result'] == true){
          alert("<%=successInfo%>");
          location.href="/";
        }else if(data['result'] == false){
          
          alert("<%=errorInfo%>");
        }
      },
			beforeSend: function () {
			},
			complete: function () {
			}
    });

  }


    });






  });
</script>



</html>